# =============================================================================
# KGraphPlanner Environment Configuration
# Copy this file to .env and fill in actual values.
# =============================================================================

# --- OpenAI ---
OPENAI_API_KEY=sk-your-openai-api-key

# --- JWT / Auth ---
JWT_ENABLED=true
JWT_ALGORITHM=RS256
# JWT_SECRET_KEY=your-secret-key-for-hmac-algorithms
# JWT_PUBLIC_KEY_PATH=/path/to/jwt_public.pem
JWT_REQUIRED_CLAIMS=sub,exp,iat
JWT_TOKEN_EXPIRY_SECONDS=3600
JWT_ISSUER=http://host.docker.internal:8085/realms/your-realm
JWT_AUDIENCE=account
JWT_JWKS_URL=http://host.docker.internal:8085/realms/your-realm/protocol/openid-connect/certs

# --- Keycloak credentials (used by test scripts) ---
KEYCLOAK_USER=testuser
KEYCLOAK_PASSWORD=testpass
KEYCLOAK_REALM=your-realm
KEYCLOAK_CLIENT_ID=your-client-id
KEYCLOAK_CLIENT_SECRET=your-client-secret

# =============================================================================
# KGraphPlanner Agent Config  (prefix: KGPLAN__)
#
# Hierarchical keys use __ (double underscore) as separator.
# Comma-separated values become lists.
# JSON literals (numbers, booleans) are parsed automatically.
# =============================================================================

# --- Tool configuration ---
KGPLAN__TOOLS__ENDPOINT=http://localhost:8008
KGPLAN__TOOLS__ENABLED=google_web_search_tool,place_search_tool,google_address_validation_tool,weather_tool,knowledge_search_tool
KGPLAN__TOOLS__WEB_SEARCH__DEFAULT_NUM_RESULTS=5
KGPLAN__TOOLS__WEB_SEARCH__MAX_RESULTS=20

# --- Agent / model configuration ---
KGPLAN__AGENT__NAME=KGraphPlanner Agent
KGPLAN__AGENT__DESCRIPTION=AI agent with planning and tool capabilities
KGPLAN__AGENT__MODEL__PROVIDER=openai
KGPLAN__AGENT__MODEL__NAME=gpt-4
KGPLAN__AGENT__MODEL__TEMPERATURE=0.7
KGPLAN__AGENT__MODEL__MAX_TOKENS=4096

# --- Logging ---
KGPLAN__LOGGING__LEVEL=INFO
KGPLAN__LOGGING__FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# --- Checkpointing ---
KGPLAN__CHECKPOINTING__ENABLED=true
KGPLAN__CHECKPOINTING__BACKEND=memory
# Redis URL: local dev redis://localhost:6381, production (MemoryDB TLS) rediss://<endpoint>:6379
KGPLAN__CHECKPOINTING__REDIS_URL=redis://localhost:6381
# TTL in seconds for checkpoint keys (default: 3600)
KGPLAN__CHECKPOINTING__REDIS_TTL=3600
# Environment prefix for key isolation: dev, test, prod (default: dev)
KGPLAN__CHECKPOINTING__REDIS_ENV=dev
# Optional app namespace to separate agents: sales, custsupport, etc. (default: empty)
KGPLAN__CHECKPOINTING__REDIS_APP=
# Cluster mode: "auto" (detect from rediss:// scheme), "true", or "false" (default: auto)
KGPLAN__CHECKPOINTING__REDIS_CLUSTER=auto

# --- Memory ---
KGPLAN__MEMORY__ENABLED=true
KGPLAN__MEMORY__MAX_HISTORY=100

# --- Weaviate vector store ---
KGPLAN__WEAVIATE__ENABLED=true
KGPLAN__WEAVIATE__HTTP_HOST=your-weaviate-host
KGPLAN__WEAVIATE__HTTP_PORT=443
KGPLAN__WEAVIATE__HTTP_SECURE=true
KGPLAN__WEAVIATE__GRPC_HOST=grpc.your-weaviate-host
KGPLAN__WEAVIATE__GRPC_PORT=50051
KGPLAN__WEAVIATE__GRPC_SECURE=false
KGPLAN__WEAVIATE__SKIP_INIT_CHECKS=true
KGPLAN__WEAVIATE__AUTH_MODE=bearer
KGPLAN__WEAVIATE__EMBEDDING_PROVIDER=openai
KGPLAN__WEAVIATE__EMBEDDING_MODEL=text-embedding-3-small

# --- Weaviate Keycloak Auth (for JWT acquisition in test scripts) ---
WEAVIATE_KEYCLOAK_URL=https://your-keycloak-host/realms/your-realm/protocol/openid-connect/token
WEAVIATE_KEYCLOAK_CLIENT_ID=weaviate-client
WEAVIATE_KEYCLOAK_CLIENT_SECRET=your-client-secret
WEAVIATE_KEYCLOAK_USERNAME=your-username
WEAVIATE_KEYCLOAK_PASSWORD=your-password
